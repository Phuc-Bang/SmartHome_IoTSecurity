<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 Smart Home Dashboard</title>
    <meta name="description"
        content="ESP32 Smart Home IoT Security Dashboard - Monitor and control your smart home devices">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <!-- ============================================
         HEADER
         ============================================ -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-house-signal"></i>
                </div>
                <div class="logo-text">
                    <h1>Smart Home IoT</h1>
                    <span>Security Dashboard</span>
                </div>
            </div>
            <div class="header-actions">
                <div class="status-badge">
                    <div class="status-dot" id="connectionStatus"></div>
                    <span id="statusText">Đang kết nối...</span>
                </div>
                <div class="time-display" id="currentTime">--:--:--</div>
            </div>
        </div>
    </header>

    <!-- ============================================
         WARNING BANNER
         ============================================ -->
    <div class="warning-banner">
        <i class="fas fa-shield-exclamation"></i>
        <span>⚠️ CHẾ ĐỘ DEMO: Hệ thống này chứa các lỗ hổng bảo mật có chủ đích cho mục đích giáo dục</span>
    </div>

    <!-- ============================================
         MAIN DASHBOARD
         ============================================ -->
    <main class="dashboard">
        <div class="container">

            <!-- Device Selector -->
            <div class="device-selector">
                <div class="selector-left">
                    <div class="selector-icon">
                        <i class="fas fa-microchip"></i>
                    </div>
                    <div class="selector-text">
                        <h3>Chọn Thiết Bị</h3>
                        <span>Kết nối đến ESP32 của bạn</span>
                    </div>
                </div>
                <div class="device-select-wrapper">
                    <select id="deviceSelect">
                        <option value="">Đang tải thiết bị...</option>
                    </select>
                </div>
            </div>

            <!-- ============================================
                 SENSOR CARDS GRID
                 ============================================ -->
            <div class="sensor-grid">

                <!-- Temperature Card -->
                <div class="sensor-card temperature">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="card-icon">
                                <i class="fas fa-temperature-high"></i>
                            </div>
                            <div class="card-title">
                                <h3>Nhiệt Độ</h3>
                                <span>Cảm biến DHT22</span>
                            </div>
                        </div>
                        <span class="card-badge badge-live">
                            <i class="fas fa-circle" style="font-size: 6px;"></i> LIVE
                        </span>
                    </div>
                    <div class="card-content">
                        <div class="value-display">
                            <span class="main-value" id="tempValue">--</span>
                            <span class="value-unit">°C</span>
                        </div>
                        <div class="progress-wrapper">
                            <div class="progress-header">
                                <span class="progress-label">Mức nhiệt độ</span>
                                <span class="progress-value" id="tempPercent">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="tempProgress" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="status-row" id="tempStatus">
                            <i class="fas fa-circle-check"></i>
                            <span>Đang chờ dữ liệu...</span>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="last-update">
                            <i class="fas fa-clock"></i>
                            <span id="tempTime">Cập nhật lần cuối: --</span>
                        </div>
                    </div>
                </div>

                <!-- Humidity Card -->
                <div class="sensor-card humidity">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="card-icon">
                                <i class="fas fa-droplet"></i>
                            </div>
                            <div class="card-title">
                                <h3>Độ Ẩm</h3>
                                <span>Cảm biến DHT22</span>
                            </div>
                        </div>
                        <span class="card-badge badge-live">
                            <i class="fas fa-circle" style="font-size: 6px;"></i> LIVE
                        </span>
                    </div>
                    <div class="card-content">
                        <div class="value-display">
                            <span class="main-value" id="humidityValue">--</span>
                            <span class="value-unit">%</span>
                        </div>
                        <div class="progress-wrapper">
                            <div class="progress-header">
                                <span class="progress-label">Mức độ ẩm</span>
                                <span class="progress-value" id="humidityPercent">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="humidityProgress" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="status-row" id="humidityStatus">
                            <i class="fas fa-circle-check"></i>
                            <span>Đang chờ dữ liệu...</span>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="last-update">
                            <i class="fas fa-clock"></i>
                            <span id="humidityTime">Cập nhật lần cuối: --</span>
                        </div>
                    </div>
                </div>

                <!-- Light Card -->
                <div class="sensor-card light">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="card-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="card-title">
                                <h3>Ánh Sáng</h3>
                                <span>Cảm biến LDR</span>
                            </div>
                        </div>
                        <span class="card-badge badge-live">
                            <i class="fas fa-circle" style="font-size: 6px;"></i> LIVE
                        </span>
                    </div>
                    <div class="card-content">
                        <div class="value-display">
                            <span class="main-value" id="lightValue">--</span>
                            <span class="value-unit">%</span>
                        </div>
                        <div class="progress-wrapper">
                            <div class="progress-header">
                                <span class="progress-label">Cường độ ánh sáng</span>
                                <span class="progress-value" id="lightPercent">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="lightProgress" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="status-row" id="lightStatus">
                            <i class="fas fa-circle-check"></i>
                            <span>Đang chờ dữ liệu...</span>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="last-update">
                            <i class="fas fa-clock"></i>
                            <span id="lightTime">Cập nhật lần cuối: --</span>
                        </div>
                    </div>
                </div>

                <!-- System Status Card -->
                <div class="sensor-card system">
                    <div class="card-header">
                        <div class="card-header-left">
                            <div class="card-icon">
                                <i class="fas fa-server"></i>
                            </div>
                            <div class="card-title">
                                <h3>Trạng Thái Hệ Thống</h3>
                                <span>ESP32 DevKit</span>
                            </div>
                        </div>
                        <span class="card-badge badge-live">
                            <i class="fas fa-circle" style="font-size: 6px;"></i> ONLINE
                        </span>
                    </div>
                    <div class="card-content">
                        <div class="system-stats">
                            <div class="stat-item">
                                <div class="stat-left">
                                    <div class="stat-icon">
                                        <i class="fas fa-fingerprint"></i>
                                    </div>
                                    <span class="stat-label">Device ID</span>
                                </div>
                                <span class="stat-value" id="deviceId">--</span>
                            </div>
                            <div class="stat-item">
                                <div class="stat-left">
                                    <div class="stat-icon">
                                        <i class="fas fa-clock-rotate-left"></i>
                                    </div>
                                    <span class="stat-label">Thời gian hoạt động</span>
                                </div>
                                <span class="stat-value" id="uptime">--</span>
                            </div>
                            <div class="stat-item">
                                <div class="stat-left">
                                    <div class="stat-icon">
                                        <i class="fas fa-database"></i>
                                    </div>
                                    <span class="stat-label">Số điểm dữ liệu</span>
                                </div>
                                <span class="stat-value" id="dataPoints">--</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- ============================================
                 CHARTS SECTION
                 ============================================ -->
            <div class="charts-section">
                <div class="chart-container">
                    <div class="section-header">
                        <div class="section-title">
                            <div class="section-title-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div>
                                <h3>Xu Hướng Cảm Biến</h3>
                                <span>Dữ liệu real-time từ các cảm biến</span>
                            </div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-secondary" onclick="updateCharts()">
                                <i class="fas fa-arrows-rotate"></i>
                                Làm mới
                            </button>
                            <button class="btn btn-primary" onclick="exportData()">
                                <i class="fas fa-download"></i>
                                Xuất dữ liệu
                            </button>
                        </div>
                    </div>
                    <canvas id="sensorChart"></canvas>
                </div>
            </div>

            <!-- ============================================
                 SECURITY ANALYSIS SECTION
                 ============================================ -->
            <div class="security-section">
                <div class="section-header" style="margin-bottom: 1.5rem;">
                    <div class="section-title">
                        <div class="section-title-icon" style="background: var(--danger-gradient);">
                            <i class="fas fa-shield-halved"></i>
                        </div>
                        <div>
                            <h3>Phân Tích Bảo Mật</h3>
                            <span>Đánh giá lỗ hổng và khuyến nghị</span>
                        </div>
                    </div>
                </div>

                <div class="security-grid">

                    <!-- Vulnerabilities Card -->
                    <div class="security-card vulnerability">
                        <div class="security-card-header">
                            <div class="security-icon-wrapper">
                                <i class="fas fa-bug"></i>
                            </div>
                            <div class="security-card-title">
                                <h4>Lỗ Hổng Phát Hiện</h4>
                                <span>4 vấn đề cần khắc phục</span>
                            </div>
                        </div>
                        <ul class="security-list">
                            <li>
                                <i class="fas fa-xmark"></i>
                                <span>Thông tin xác thực được mã hóa cứng trong firmware</span>
                            </li>
                            <li>
                                <i class="fas fa-xmark"></i>
                                <span>Giao tiếp HTTP không mã hóa (plaintext)</span>
                            </li>
                            <li>
                                <i class="fas fa-xmark"></i>
                                <span>Lưu lượng MQTT không được mã hóa</span>
                            </li>
                            <li>
                                <i class="fas fa-xmark"></i>
                                <span>Không có xác thực đầu vào</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Recommendations Card -->
                    <div class="security-card recommendation">
                        <div class="security-card-header">
                            <div class="security-icon-wrapper">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="security-card-title">
                                <h4>Khuyến Nghị Bảo Mật</h4>
                                <span>Các bước cải thiện bảo mật</span>
                            </div>
                        </div>
                        <ul class="security-list">
                            <li>
                                <i class="fas fa-check"></i>
                                <span>Triển khai mã hóa HTTPS/TLS</span>
                            </li>
                            <li>
                                <i class="fas fa-check"></i>
                                <span>Sử dụng bộ nhớ an toàn cho thông tin xác thực</span>
                            </li>
                            <li>
                                <i class="fas fa-check"></i>
                                <span>Thêm xác thực và kiểm tra đầu vào</span>
                            </li>
                            <li>
                                <i class="fas fa-check"></i>
                                <span>Bật xác thực thiết bị hai chiều</span>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </main>

    <!-- ============================================
         FOOTER
         ============================================ -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <p>© 2024 <span>ESP32 Smart Home IoT Security</span> - Dành cho mục đích giáo dục</p>
                </div>
                <div class="footer-right">
                    <a href="#" class="footer-link" title="GitHub">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="#" class="footer-link" title="Documentation">
                        <i class="fas fa-book"></i>
                    </a>
                    <a href="#" class="footer-link" title="Settings">
                        <i class="fas fa-cog"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Custom Scripts -->
    <script src="/static/script.js"></script>
</body>

</html>